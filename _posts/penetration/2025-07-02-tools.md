---
title:  "enumeration tools"
excerpt: "enumeration tools 명령어 정리"

categories: penetration
tags:
  - [smb, ]

typora-root-url: ../../
 
date: 2025-07-02
last_modified_at: 2025-08-25

---

## Port Scan

### nmap

- `-sS`: TCP SYN 스캔으로 포트 열린 상태만 확인하는 기본 스텔스 스캔  
  예: `nmap -sS 192.168.1.10`

- `-sT`: TCP Connect 스캔으로 연결 시도를 통한 포트 확인  
  예: `nmap -sT 192.168.1.10`

- `-sU`: UDP 포트 스캔  
  예: `nmap -sU 192.168.1.10`

- `-p`: 특정 포트나 포트 범위 지정  
  예: `nmap -p 80,443 192.168.1.10`

- `-O`: 운영체제 정보 탐지  
  예: `sudo nmap -O 192.168.1.10`

- `-sV`: 서비스와 버전 탐지  
  예: `nmap -sV 192.168.1.10`

- `-A`: OS, 서비스, 스크립트 등 정보 종합 수집  
  예: `sudo nmap -A 192.168.1.10`

- `-T4`: 스캔 속도 빠르게 조절 (0~5까지, 4가 보통 빠른 수준)  
  예: `nmap -T4 192.168.1.10`

- `-sn`: 호스트 생존 여부만 확인 (포트 스캔 없이)  
  예: `nmap -sn 192.168.1.0/24`

- `-Pn`: 호스트가 항상 살아있다고 가정 (ping 무시)  
  예: `nmap -Pn 192.168.1.10`

- `--script`: 취약점 탐색 등 스크립트 실행  
  예: `nmap --script vuln 192.168.1.10`

- `-oN`: 결과를 일반 텍스트 파일로 저장  
  예: `nmap -oN scan.txt 192.168.1.10`


### rustscan
- 기본 포트 전체 스캔  
  ```
  rustscan -a 192.168.1.10
  ```
  → 타겟 IP의 모든 TCP 포트 빠르게 스캔 후 Nmap 정밀 탐색 자동 실행

- 특정 포트 지정 스캔  
  ```
  rustscan -a 192.168.1.10 -p 80,443
  ```
  → 80, 443번 포트만 빠르게 스캔

- 포트 범위 지정  
  ```
  rustscan -a 192.168.1.10 --range 1-1000
  ```
  → 1번부터 1000번까지 연속된 포트 스캔

- 스캔 시 시스템 파일디스크립터 제한 해제 (대규모 스캔 시)  
  ```
  rustscan -a 192.168.1.10 --ulimit 5000
  ```

- Nmap 추가 인수 전달 (예: 서비스 버전 및 기본 스크립트 활성화)  
  ```
  rustscan -a 192.168.1.10 -- -sC -sV
  ```
  → RustScan 스캔 후 Nmap의 스크립트 및 서비스 버전 스캔 실행




## smb

### smbclient
- SMB 공유 리스트 확인  
  ```bash
  smbclient -L //192.168.1.3 -U username
  ```
  서버 192.168.1.3의 공유 목록 확인, 비밀번호 입력 필요

- SMB 공유 접속 (비밀번호 입력)  
  ```bash
  smbclient //192.168.1.3/share -U username
  ```
  접속 후 FTP 스타일 커맨드 사용 가능

- SMB 공유 접속 (익명 접속)  
  ```bash
  smbclient //192.168.1.3/share -N
  ```


- 연결 후 주요 명령어  
  ```bash
  smb: \> ls               # 현재 디렉토리 파일/폴더 나열
  smb: \> cd docs          # 하위 디렉토리 이동
  smb: \> get secret.txt   # 파일 다운로드
  smb: \> put shell.exe    # 파일 업로드
  smb: \> mget *           # 여러 파일 다운로드
  smb: \> mput *           # 여러 파일 업로드
  smb: \> exit             # 연결 종료
  ```
- smb 추가 명령어 설명
- `prompt off`
  - 파일 전송시 사용자에게 매번 확인을 받지 않도록 설정
  - 여러 파일을 다운로드할 때 속도를 높이기 위해 사용
  
- `recurse`
  - 하위 디렉토리까지 재귀적으로 접근하여 파일을 전송하도록 설정
  - 폴더 내 폴더들까지 모두 가져오고 싶을 때 사용


### smbmap

- SMB 공유 및 권한 정보 조회  
  ```bash
  smbmap -u username -p password -H 192.168.1.3
  ```
  해당 서버의 공유 리스트와 접근 가능한 권한 정보 출력

- 특정 공유 드라이브 지정 후 재귀적으로 목록 보기  
  ```bash
  smbmap -u username -p password -H 192.168.1.3 -s C$ -r 'Users'
  ```

- 관리자 권한 여부 확인  
  ```bash
  smbmap -u username -p password -H 192.168.1.3 --admin
  ```

- 원격 명령 실행 (권한 있을 때)  
  ```bash
  smbmap -u username -p password -H 192.168.1.3 -x 'net user attacker P@ssw0rd /add'
  ```

